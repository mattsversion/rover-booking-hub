<style>
  .card{border:1px solid #ddd;border-radius:12px;padding:12px;margin:16px 0}
  .muted{color:#666}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px 10px;border-bottom:1px solid #eee;text-align:left}
  .pill{display:inline-block;padding:2px 10px;border-radius:999px;border:1px solid #ddd;font-size:12px}
  .pill.ok{background:#eaffea;border-color:#b9e6b9}
  .pill.no{background:#fff2f2;border-color:#ffd6d6}
  form.inline{display:inline}
</style>

<h2>Clients</h2>

<div class="card">
  <h3>Add or update a client</h3>
  <form method="POST" action="/clients/add">
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <input name="phone" placeholder="+15551234567" required style="padding:8px;border:1px solid #ddd;border-radius:8px;min-width:220px">
      <input name="name"  placeholder="Name (optional)" style="padding:8px;border:1px solid #ddd;border-radius:8px;min-width:220px">
      <label style="display:flex;align-items:center;gap:6px">
        <input type="checkbox" name="trusted"> Trusted
      </label>
      <button style="padding:8px 12px;border:1px solid #111;border-radius:8px;background:#111;color:#fff">Save</button>
    </div>
    <div class="muted" style="margin-top:8px">Adding here marks the number as <b>private</b> automatically.</div>
  </form>
</div>

<div class="card">
  <h3>All clients</h3>
  <table>
    <thead>
      <tr>
        <th>Trusted</th>
        <th>Phone</th>
        <th>Name</th>
        <th>Private</th>
        <th>Updated</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% clients.forEach(c => { %>
        <tr>
          <td>
            <% if (c.trusted) { %>
              <span class="pill ok">YES</span>
            <% } else { %>
              <span class="pill no">NO</span>
            <% } %>
          </td>
          <td><%= c.phone %></td>
          <td><%= c.name || 'â€”' %></td>
          <td><%= c.isPrivate ? 'Yes' : 'No' %></td>
          <td class="muted"><%= new Date(c.updatedAt).toLocaleString() %></td>
          <td>
            <% if (c.trusted) { %>
              <form class="inline" method="POST" action="/clients/<%= c.id %>/trusted?on=0">
                <button>Untrust</button>
              </form>
            <% } else { %>
              <form class="inline" method="POST" action="/clients/<%= c.id %>/trusted?on=1">
                <button>Trust</button>
              </form>
            <% } %>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
