<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Confirmed Bookings</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; color: #111; }
    .wrap { padding: 24px; }
    h1 { margin: 0 0 8px 0; font-size: 24px; letter-spacing: 0.2px; }
    .sub { color:#666; font-size:12px; margin-bottom:16px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .card {
      border: 1px solid #e7e7e7;
      border-radius: 12px;
      padding: 14px;
      background: #fff;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
      break-inside: avoid;
    }
    .row { display:flex; justify-content:space-between; gap:8px; }
    .name { font-weight: 700; font-size: 16px; }
    .muted { color:#666; font-size:12px; }
    .chip { display:inline-block; font-size:11px; padding:2px 8px; border-radius:999px; border:1px solid #ddd; margin-right:6px; }
    .section-title { font-weight:600; font-size:12px; margin-top:8px; }
    ul { margin:4px 0 0 16px; padding:0; }
    @page { size: Letter; margin: 14mm; }
    @media print {
      .wrap { padding: 0; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Confirmed Bookings</h1>
    <div class="sub">Generated: <%= new Date(generatedAt).toLocaleString() %></div>

    <% if (!bookings.length) { %>
      <div class="muted">No confirmed bookings.</div>
    <% } %>

    <div class="grid">
      <% bookings.forEach(b => { %>
        <div class="card">
          <div class="row">
            <div class="name"><%= b.clientName %></div>
            <div class="muted"><%= b.clientPhone || b.roverRelay || '' %></div>
          </div>

          <div style="margin-top:4px;">
            <span class="chip"><%= b.serviceType %></span>
            <span class="chip">dogs: <%= b.dogsCount || 1 %></span>
          </div>

          <div class="section-title">Dates</div>
          <div class="muted">
            <%= new Date(b.startAt).toLocaleString() %>
            &nbsp;→&nbsp;
            <%= new Date(b.endAt).toLocaleString() %>
          </div>

          <div class="section-title">Pets</div>
          <% if (b.pets && b.pets.length) { %>
            <ul>
              <% b.pets.forEach(p => { %>
                <li>
                  <b><%= p.name %></b>
                  <span class="muted"><%= p.breed || '' %></span>
                  <% if (p.weightLbs) { %><span class="muted">• <%= p.weightLbs %> lbs</span><% } %>
                  <% if (p.ageYears!=null) { %><span class="muted">• <%= p.ageYears %> yr</span><% } %>
                </li>
              <% }) %>
            </ul>
          <% } else { %>
            <div class="muted">—</div>
          <% } %>

          <% if (b.notes) { %>
            <div class="section-title">Notes</div>
            <div><%= b.notes %></div>
          <% } %>
        </div>
      <% }) %>
    </div>
  </div>
</body>
</html>
